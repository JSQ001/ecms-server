<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
  <changeSet id="T100-2021128-001" author="jsq" >
<!--    <createTable tableName="sys_permission" remarks="权限表">-->
<!--      <column name="id" type="varchar(35)" remarks="权限id">-->
<!--        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.sys_permission.id"/>-->
<!--      </column>-->
<!--      <column name="permission_code" type="varchar(20)" remarks="权限代码">-->
<!--        <constraints nullable="false" unique="true" uniqueConstraintName="unique.sys_permission.permission_code"/>-->
<!--      </column>-->
<!--      <column name="permission_name" type="varchar(20)" remarks="权限名称">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->

<!--      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="created_by" type="varchar(20)" remarks="创建人">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="updated_by" type="varchar(20)" remarks="更新人">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="is_deleted" type="boolean"  remarks="逻辑删除">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--    </createTable>-->

<!--    <createTable tableName="sys_role" remarks="角色表">-->
<!--      <column name="id" type="varchar(35)" remarks="角色ID">-->
<!--        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.sys_role_id"/>-->
<!--      </column>-->
<!--      <column name="role_code" type="varchar(20)" remarks="角色代码">-->
<!--        <constraints nullable="false" unique="true" uniqueConstraintName="unique.sys_role.role_code"/>-->
<!--      </column>-->
<!--      <column name="role_name" type="varchar(20)" remarks="角色名称">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="created_by" type="varchar(20)" remarks="创建人">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="updated_by" type="varchar(20)" remarks="更新人">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="is_deleted" type="boolean"  remarks="逻辑删除">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--    </createTable>-->


<!--    <createTable tableName="sys_role_permission" remarks="角色权限表">-->
<!--      <column name="id" type="varchar(35)" remarks="角色权限表id">-->
<!--        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.role_permission"/>-->
<!--      </column>-->
<!--      <column name="role_id" type="varchar(35)" remarks="角色id">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="permission_id" type="varchar(35)" remarks="权限id">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--    </createTable>-->

<!--    <addUniqueConstraint tableName="sys_role_permission" columnNames="role_id,permission_id" constraintName="unique.sys_role_permission.role_id_permission_id"/>-->

    <createTable tableName="sys_user_info" remarks="用户信息表">
      <column name="id" type="bigint(20)" remarks="用户id">
        <constraints nullable="false" primaryKey="true" primaryKeyName="用户信息id唯一"/>
      </column>
      <column name="account" type="bigint(20)" remarks="用户账号">
        <constraints nullable="false" unique="true" primaryKeyName="用户信息关联账号唯一"/>
      </column>
      <column name="phone" type="varchar(20)" remarks="联系方式"/>
      <column name="age" type="tinyint" remarks="年龄"/>
      <column name="name" type="tinyint" remarks="用户姓名"/>

      <column name="role_id" type="varchar(35)" remarks="角色id">
        <constraints nullable="false"/>
      </column>

      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
        <constraints nullable="false"/>
      </column>
      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
        <constraints nullable="false"/>
      </column>
      <column name="created_by" type="varchar(20)" remarks="创建人">
        <constraints nullable="false"/>
      </column>
      <column name="updated_by" type="varchar(20)" remarks="更新人">
        <constraints nullable="false"/>
      </column>
      <column name="is_deleted" type="boolean"  remarks="逻辑删除">
        <constraints nullable="false"/>
      </column>
    </createTable>


<!--    <createIndex tableName="sys_user" indexName="index.sys_user.user_name">-->
<!--      <column name="user_name"/>-->
<!--    </createIndex>-->

<!--    <createTable tableName="sys_menu" remarks="菜单表">-->
<!--      <column name="id" type="varchar(35)" remarks="菜单ID">-->
<!--        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.menu_id"/>-->
<!--      </column>-->
<!--      <column name="menu_name" type="varchar(20)" remarks="菜单名称">-->
<!--        <constraints nullable="false" unique="true" foreignKeyName="unique.menu_name" />-->
<!--      </column>-->
<!--      <column name="parent_id" type="varchar(35)" remarks="父菜单id">-->
<!--      </column>-->
<!--      <column name="path" type="varchar(100)" remarks="菜单path">-->
<!--        <constraints nullable="false" unique="true" foreignKeyName="unique.path" />-->
<!--      </column>-->
<!--      <column name="is_deleted" type="boolean"  remarks="逻辑删除">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="created_by" type="varchar(20)" remarks="创建人">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="updated_by" type="varchar(20)" remarks="更新人">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--    </createTable>-->

<!--    <addUniqueConstraint tableName="sys_menu" columnNames="id,parent_id" constraintName="unique.sys_menu.id_parentId"/>-->

<!--    <createTable tableName="sys_menu_role" remarks="菜单角色权限表">-->
<!--      <column name="id" type="varchar(35)" remarks="菜单角色权限表id">-->
<!--        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.menu_role"/>-->
<!--      </column>-->
<!--      <column name="role_id" type="varchar(30)" remarks="角色id">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--      <column name="menu_id" type="varchar(35)" remarks="菜单id">-->
<!--        <constraints nullable="false"/>-->
<!--      </column>-->
<!--    </createTable>-->
<!--    <addUniqueConstraint tableName="sys_menu_role" columnNames="role_id,menu_id" constraintName="unique.sys_menu_role.role_id_menu_id"/>-->


    <createTable tableName="cms_column" remarks="栏目表">
      <column name="id" type="bigint(20)" remarks="ID">
        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.cms_column.id"/>
      </column>
      <column name="parent_id" type="bigint(20)" remarks="所属父栏目id"/>
      <column name="code"  type="varchar(50)" remarks="栏目code">
        <constraints nullable="false" unique="true" primaryKeyName="栏目code唯一"/>
      </column>

      <column name="name" type="varchar(255)" remarks="栏目名称"/>

<!--      <column name="is_leaf" type="boolean" remarks="是否是叶子节点"/>-->
      <column name="description" type="varchar(255)" remarks="栏目描述"/>
      <column name="cover_img_url" type="varchar(255)" remarks="栏目封面图片地址"/>
      <column name="flag" type="varchar(10)" remarks="栏目标记属性（扩展用）"/>
      <column name="path" type="varchar(255)" remarks="栏目路径"/>
      <column name="type" type="tinyint" defaultValue="0" remarks="栏目类型：0-内部栏目，1-外部栏目"/>
      <column name="keyword" type="varchar(255)" remarks="关键字"/>
      <column name="custom_url" type="varchar(255)" remarks="自定义链接"/>
      <column name="publish_time" type="datetime" remarks="栏目上线时间"/>
      <column name="sort_order" type="int(11)" remarks="自定义顺序"/>
      <column name="content_template_url" type="varchar(255)" remarks="内容页模板"/>
      <column name="list_template_url" type="varchar(255)" remarks="列表页模板"/>

      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
        <constraints nullable="false"/>
      </column>
      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
        <constraints nullable="false"/>
      </column>
      <column name="created_by" type="varchar(20)" remarks="创建人">
        <constraints nullable="false"/>
      </column>
      <column name="updated_by" type="varchar(20)" remarks="更新人">
        <constraints nullable="false"/>
      </column>
      <column name="is_deleted" type="boolean" defaultValue="0"  remarks="逻辑删除">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <createTable tableName="cms_article" remarks="文章信息表">
        <column name="id" type="bigint(20)" remarks="主键id">
            <constraints nullable="false" primaryKey="true" primaryKeyName="pk.cms_article.id"/>
        </column>
        <column name="column_id" type="bigint(20)" remarks="所属栏目id">
        <constraints nullable="false" />
        </column>
        <column name="title" type="varchar(255)" remarks="文章标题"/>
        <column name="sub_title" type="varchar(255)" remarks="副标题"/>
        <column name="keyword" type="varchar(255)" remarks="关键字"/>
        <column name="essential" type="clob" remarks="文章摘要"/>
        <column name="content" type="clob" remarks="内容"/>
        <column name="cover_img_url" type="varchar(255)" remarks="标题图片"/>
        <column name="link_url" type="varchar(255)" remarks="跳转链接地址"/>
        <column name="type" type="varchar(10)" remarks="类型（扩展使用）"/>
        <column name="author" type="varchar(20)" remarks="作者"/>
        <column name="source" type="varchar(255)" remarks="来源"/>
        <column name="remarks" type="varchar(255)" remarks="描述"/>
        <column name="audit_comments" type="varchar(255)" remarks="审核批注"/>
        <column name="audit_user_id" type="bigint(20)" remarks="审核人id"/>
        <column name="audit_time" type="datetime" defaultValue="now()" remarks="审核时间"/>
        <column name="state" type="tinyint" remarks="文章状态：0-草稿,1-待审核,2-审核通过,3-审核不通过"/>

        <column name="is_show" type="boolean" remarks="是否显示：0-不显示，1-显示"/>
        <column name="is_focus" type="boolean" remarks="是否焦点图显示"/>
        <column name="is_recommended" type="boolean" remarks="是否推荐"/>
        <column name="is_top" type="boolean" remarks="是否置顶"/>
        <column name="is_major" type="boolean" remarks="是否大事"/>
        <column name="publish_time" type="datetime" remarks="发布时间"/>
        <column name="sort_order" type="int(11) " remarks="自定义顺序"/>
        <column name="hit_nums" type="int(11) " remarks="点击次数"/>

        <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
            <constraints nullable="false"/>
        </column>
        <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
            <constraints nullable="false"/>
        </column>
        <column name="created_by" type="bigint(20)" remarks="创建人">
            <constraints nullable="false"/>
        </column>
        <column name="updated_by" type="bigint(20)" remarks="更新人">
            <constraints nullable="false"/>
        </column>
        <column name="is_deleted" type="boolean"  remarks="逻辑删除">
            <constraints nullable="false"/>
        </column>
    </createTable>

    <addUniqueConstraint tableName="cms_article" columnNames="id,column_id" constraintName="unique.cms_article.id_column_id"/>

    <createTable tableName="cms_collect_rule" remarks="采集规则表">
      <column name="id" type="bigint(35)" remarks="ID">
        <constraints nullable="false" primaryKey="true" primaryKeyName="pk.cms_collect_rule.id"/>
      </column>
      <column name="name" type="varchar(32)" remarks="节点名称">
        <constraints nullable="false"/>
      </column>
      <column name="rule_type" type="tinyint" remarks="规则类型：1-XPath，2-正则表达式">
        <constraints nullable="false"/>
      </column>
      <column name="column_id" type="bigint(20)" remarks="入库栏目id">
        <constraints nullable="false"/>
      </column>
      <column name="source" type="varchar(255)" remarks="采集来源"/>
      <column name="collect_url" type="varchar(255)" remarks="采集地址地址">
        <constraints nullable="false"/>
      </column>
      <column name="collect_time" type="varchar(255)" remarks="采集时间"/>
      <column name="links_rule" type="varchar(255)" remarks="采集列表规则">
        <constraints nullable="false"/>
      </column>
      <column name="title_rule" type="varchar(255)" remarks="标题规则">
        <constraints nullable="false"/>
      </column>

      <column name="sub_title_rule" type="varchar(255)" remarks="副标题规则"/>
      <column name="pub_time_rule" type="varchar(255)" remarks="发布时间规则"/>
      <column name="essential_rule" type="varchar(255)" remarks="文章摘要规则"/>
      <column name="author_rule" type="varchar(255)" remarks="作者规则"/>
      <column name="content_rule" type="varchar(255)" remarks="正文规则">
        <constraints nullable="false"/>
      </column>
      <column name="remarks" type="varchar(255)" remarks="备注"/>
      <column name="is_auto" type="boolean" remarks="是否自动采集：0-非自动，1-自动"/>
      <column name="auto_collect_time" type="datetime" remarks="自动采集时间"/>

      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
        <constraints nullable="false"/>
      </column>
      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
        <constraints nullable="false"/>
      </column>
      <column name="created_by" type="varchar(20)" remarks="创建人">
        <constraints nullable="false"/>
      </column>
      <column name="updated_by" type="varchar(20)" remarks="更新人">
        <constraints nullable="false"/>
      </column>
      <column name="is_deleted" type="boolean"  remarks="逻辑删除">
        <constraints nullable="false"/>
      </column>
    </createTable>
    <addUniqueConstraint tableName="cms_collect_rule" columnNames="id,column_id" constraintName="unique.cms_collect_rule.id_column_id"/>

    <createTable tableName="cms_file" remarks="文章附件">
      <column name="id" type="bigint(20)" remarks="主键">
        <constraints nullable="false" primaryKey="true" primaryKeyName="文章附近主键唯一"/>
      </column>
      <column name="article_id" type="bigint(20)" remarks="关联文章id">
        <constraints nullable="false"/>
      </column>
      <column name="name" type="varchar(255)" remarks="附近名称">
        <constraints nullable="false"/>
      </column>
      <column name="size" type="bigint(20)" remarks="文件大小，以KB为单位"/>
      <column name="ext" type="varchar(10)" remarks="文件类型"/>
      <column name="mime" type="varchar(10)" remarks="mime类型"/>
      <column name="path" type="varchar(10)" remarks="存储路径"/>

      <column name="downloads" type="int(11)" defaultValue="0" remarks="下载次数">
        <constraints nullable="false"/>
      </column>

      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
        <constraints nullable="false"/>
      </column>
      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
        <constraints nullable="false"/>
      </column>
      <column name="created_by" type="varchar(20)" remarks="创建人">
        <constraints nullable="false"/>
      </column>
      <column name="updated_by" type="varchar(20)" remarks="更新人">
        <constraints nullable="false"/>
      </column>
      <column name="is_deleted" type="boolean"  remarks="逻辑删除">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <createTable tableName="cms_history_log" remarks="文章浏览记录">
      <column name="id" type="bigint(20)" remarks="主键">
        <constraints nullable="false" primaryKey="true" primaryKeyName="文章浏览记录主键唯一"/>
      </column>
      <column name="article_id" type="bigint(20)" remarks="文章id">
        <constraints nullable="false"/>
      </column>
      <column name="account_id" type="bigint(20)" remarks="账号ID"/>
      <column name="ipaddr" type="varchar(255)" remarks="浏览ip"/>
      <column name="is_mobile" type="boolean" remarks="是否为移动端：0-非移动设备，1-移动设备"/>

      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
        <constraints nullable="false"/>
      </column>
      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
        <constraints nullable="false"/>
      </column>
      <column name="created_by" type="varchar(20)" remarks="创建人">
        <constraints nullable="false"/>
      </column>
      <column name="updated_by" type="varchar(20)" remarks="更新人">
        <constraints nullable="false"/>
      </column>
      <column name="is_deleted" type="boolean"  remarks="逻辑删除">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <createTable tableName="sys_config" remarks="系统参数配置表">
      <column name="id" type="bigint(20)" remarks="主键">
        <constraints nullable="false" primaryKey="true" primaryKeyName="系统参数配置表"/>
      </column>
      <column name="code" type="varchar(100)" remarks="参数键名">
        <constraints nullable="false"/>
      </column>
      <column name="name" type="varchar(100)" remarks="参数名称">
        <constraints nullable="false"/>
      </column>
      <column name="type" type="tinyint" defaultValue="0" remarks="系统内置（1是 0否">
        <constraints nullable="false"/>
      </column>
      <column name="created_time" type="datetime" defaultValue="now()" remarks="创建时间">
        <constraints nullable="false"/>
      </column>
      <column name="updated_time" type="datetime" defaultValue="now()" remarks="更新时间">
        <constraints nullable="false"/>
      </column>
      <column name="created_by" type="varchar(20)" remarks="创建人">
        <constraints nullable="false"/>
      </column>
      <column name="updated_by" type="varchar(20)" remarks="更新人">
        <constraints nullable="false"/>
      </column>
      <column name="is_deleted" type="boolean"  remarks="逻辑删除">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="T100-20211018-002" author="jsq">
<!--    <sqlFile path="classpath:/db/sql/sequence.sql" splitStatements="false" stripComments="false"  encoding="UTF-8" />-->
    <sqlFile path="classpath:/db/sql/init.sql" endDelimiter="//" splitStatements="false" stripComments="false"  encoding="UTF-8" />
  </changeSet>
</databaseChangeLog>
